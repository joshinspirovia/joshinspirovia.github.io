<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Josh · Inspirovia CMS</title>
  <!-- Font Awesome 6 -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <!-- Google Fonts: Inter & Space Grotesk -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,300..700&family=Space+Grotesk:wght@400;500;600&display=swap" rel="stylesheet" />
  <!-- Firebase SDK (modular) -->
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';
    import { getAnalytics } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-analytics.js';
    import { 
      getFirestore, doc, getDoc 
    } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';
    import { 
      getAuth, signInWithEmailAndPassword, signOut, onAuthStateChanged 
    } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';

    const firebaseConfig = {
      apiKey: "AIzaSyCyEA4LKyZWc9EfPuI0m_1cQNumWsU1Tvw",
      authDomain: "josh-inspirovia.firebaseapp.com",
      projectId: "josh-inspirovia",
      storageBucket: "josh-inspirovia.firebasestorage.app",
      messagingSenderId: "551356397320",
      appId: "1:551356397320:web:1a208800332a23be859ebd",
      measurementId: "G-NHND7EVPSR"
    };

    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const db = getFirestore(app);
    const auth = getAuth(app);

    const loginSection = document.getElementById('loginSection');
    const adminPanel = document.getElementById('adminPanel');
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    const loginBtn = document.getElementById('loginBtn');
    const logoutBtn = document.getElementById('logoutBtn');
    const loginError = document.getElementById('loginError');
    const lastUpdatedEl = document.getElementById('lastUpdated');

    onAuthStateChanged(auth, async (user) => {
      if (user) {
        loginSection.classList.add('hidden');
        adminPanel.classList.remove('hidden');
        loadLastUpdated();
      } else {
        loginSection.classList.remove('hidden');
        adminPanel.classList.add('hidden');
      }
    });

    loginBtn.addEventListener('click', async () => {
      const email = emailInput.value.trim();
      const password = passwordInput.value.trim();
      loginError.textContent = '';
      try {
        await signInWithEmailAndPassword(auth, email, password);
      } catch (error) {
        loginError.textContent = 'Login failed: ' + error.message;
      }
    });

    logoutBtn.addEventListener('click', () => {
      signOut(auth);
    });

    async function loadLastUpdated() {
      try {
        const docRef = doc(db, 'cms', 'homepageContent');
        const docSnap = await getDoc(docRef);
        if (docSnap.exists()) {
          const data = docSnap.data();
          if (data.lastUpdated) {
            const date = new Date(data.lastUpdated);
            lastUpdatedEl.textContent = date.toLocaleString();
          }
        }
      } catch (error) {
        console.error('Error loading last updated:', error);
      }
    }
  </script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Inter', sans-serif;
      background: #f0f5f4;
      color: #153b3a;
      line-height: 1.5;
      padding: 2rem;
      min-height: 100vh;
    }
    .admin-container {
      max-width: 1200px;
      margin: 0 auto;
    }
    h1 {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 2.8rem;
      margin-bottom: 0.25rem;
      color: #004d40;
      display: flex;
      align-items: center;
      gap: 15px;
    }
    h1 i {
      color: #c49a6c;
    }
    .subhead {
      font-size: 1.2rem;
      margin-bottom: 2rem;
      border-left: 5px solid #c49a6c;
      padding-left: 1rem;
      color: #2f5e5b;
    }
    .login-card {
      background: white;
      border-radius: 40px;
      padding: 2.5rem;
      max-width: 450px;
      margin: 3rem auto;
      box-shadow: 0 25px 40px -15px #1e4a4a80;
      border: 1px solid #c49a6c30;
    }
    .login-card h2 {
      font-size: 2rem;
      margin-bottom: 1.5rem;
      font-family: 'Space Grotesk', sans-serif;
    }
    .input-group {
      margin-bottom: 1.5rem;
    }
    .input-group label {
      display: block;
      font-weight: 600;
      margin-bottom: 0.4rem;
      color: #0f4a47;
    }
    .input-group input {
      width: 100%;
      padding: 1rem;
      border: 2px solid #d0dfdc;
      border-radius: 60px;
      font-size: 1rem;
      transition: 0.2s;
    }
    .input-group input:focus {
      outline: none;
      border-color: #c49a6c;
    }
    .btn {
      background: #004d40;
      color: white;
      border: none;
      padding: 1rem 2.5rem;
      border-radius: 60px;
      font-weight: 700;
      font-size: 1.1rem;
      cursor: pointer;
      transition: 0.2s;
      border: 1px solid transparent;
    }
    .btn:hover {
      background: #0b6b5e;
      transform: scale(1.02);
    }
    .btn-outline {
      background: transparent;
      border: 2px solid #004d40;
      color: #004d40;
    }
    .btn-outline:hover {
      background: #e0f0ec;
    }
    .error-message {
      color: #b02e2e;
      margin-top: 1rem;
      font-weight: 500;
    }
    .hidden {
      display: none !important;
    }
    .admin-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2.5rem;
      flex-wrap: wrap;
    }
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
      margin-top: 2rem;
    }
    .dashboard-card {
      background: white;
      border-radius: 30px;
      padding: 2rem;
      text-align: center;
      transition: 0.3s;
      border: 2px solid #e4f0ec;
      text-decoration: none;
      color: inherit;
      display: block;
    }
    .dashboard-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 30px -10px #1e4a4a80;
      border-color: #c49a6c;
    }
    .dashboard-card i {
      font-size: 3rem;
      color: #c49a6c;
      margin-bottom: 1rem;
    }
    .dashboard-card h3 {
      font-size: 1.8rem;
      margin-bottom: 0.5rem;
      color: #004d40;
    }
    .dashboard-card p {
      color: #5f7e7a;
    }
    .info-bar {
      background: #ebf7f3;
      padding: 1rem 2rem;
      border-radius: 60px;
      margin-top: 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 1rem;
    }
    footer {
      text-align: center;
      margin-top: 3rem;
      color: #5f7e7a;
    }
  </style>
</head>
<body>
  <div class="admin-container">
    <h1>
      <i class="fas fa-feather-alt"></i> Josh Inspirovia · Admin
    </h1>
    <div class="subhead">manage your inspiration content</div>

    <!-- LOGIN SECTION -->
    <div id="loginSection" class="login-card">
      <h2><i class="fas fa-lock" style="margin-right: 12px;"></i>Admin access</h2>
      <div class="input-group">
        <label>Email</label>
        <input type="email" id="email" placeholder="josh@inspirovia.com" value="josh@inspirovia.com" />
      </div>
      <div class="input-group">
        <label>Password</label>
        <input type="password" id="password" placeholder="••••••••" />
      </div>
      <button class="btn" id="loginBtn"><i class="fas fa-sign-in-alt" style="margin-right: 8px;"></i>Login</button>
      <div id="loginError" class="error-message"></div>
    </div>

    <!-- ADMIN DASHBOARD -->
    <div id="adminPanel" class="hidden">
      <div class="admin-header">
        <span style="font-size: 1.3rem; background: #ebf7f3; padding: 0.6rem 2rem; border-radius: 60px;">
          <i class="fas fa-user-check" style="color: #00796b;"></i> Josh (admin)
        </span>
        <button class="btn-outline btn" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</button>
      </div>

      <h2 style="font-size: 2rem; margin-bottom: 1rem;">Content Manager</h2>
      <p style="color: #2f5e5b; margin-bottom: 2rem;">Select a section to edit:</p>

      <div class="dashboard-grid">
        <a href="admin-quote.html" class="dashboard-card">
          <i class="fas fa-quote-right"></i>
          <h3>Quote</h3>
          <p>Edit quote of the day</p>
        </a>

        <a href="admin-motivation.html" class="dashboard-card">
          <i class="fas fa-bolt"></i>
          <h3>Motivation</h3>
          <p>Edit daily motivation</p>
        </a>

        <a href="admin-poem.html" class="dashboard-card">
          <i class="fas fa-feather-alt"></i>
          <h3>Poem</h3>
          <p>Edit today's poem</p>
        </a>

        <a href="admin-featured.html" class="dashboard-card">
          <i class="fas fa-crown"></i>
          <h3>Featured</h3>
          <p>Manage featured items</p>
        </a>

         <a href="admin-featured.html" class="dashboard-card">
          <i class="fas fa-crown"></i>
          <h3>Featured</h3>
          <p>Add Featured Content</p>
        </a>

         <a href="admin-motivation.html" class="dashboard-card">
          <i class="fas fa-crown"></i>
          <h3>Featured</h3>
          <p>Add Featured Motivation</p>
        </a>
         <a href="admin-quote.html" class="dashboard-card">
          <i class="fas fa-crown"></i>
          <h3>Featured</h3>
          <p>Add Featured Quote</p>
        </a>
         <a href="select.html" class="dashboard-card">
          <i class="fas fa-crown"></i>
          <h3>Featured</h3>
          <p>Select Poem, Quote, and Motivation</p>
        </a>

         <a href="management page.html" class="dashboard-card">
          <i class="fas fa-crown"></i>
          <h3>Featured</h3>
          <p>Management Page</p>
        </a>
      </div>

      <div class="info-bar">
        <span><i class="fas fa-info-circle"></i> Last updated: <span id="lastUpdated">Never</span></span>
        <span><i class="fas fa-database"></i> Changes save automatically</span>
      </div>
    </div>

    <footer>
      <p>© 2025 Josh Inspirovia — dedicated admin page</p>
    </footer>
  </div>
</body>
</html>